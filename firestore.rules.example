// Example Firestore rules. Copy to firebase.json or deploy via Firebase Console.
// Add rules for password_reset_requests to allow:
// - Unauthenticated create (when student clicks Forgot Password on login page)
// - Authenticated read/update for admin (when admin fetches and marks complete)

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ... your existing rules ...

    match /password_reset_requests/{docId} {
      allow create: if true;  // Student requests reset (not logged in)
      allow read, update: if request.auth != null;  // Admin reads and marks complete
    }
  }
}
